---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "qdrant-cloud_accounts_hybrid_cloud_environment Resource - terraform-provider-qdrant-cloud"
subcategory: ""
description: |-
  Hybrid Cloud Environment Resource
---

# qdrant-cloud_accounts_hybrid_cloud_environment (Resource)

## Example Usage

```terraform
terraform {
  required_version = ">= 1.7.0"
  required_providers {
    qdrant-cloud = {
      source  = "qdrant/qdrant-cloud"
      version = ">=1.1.0"
    }
  }
}

// Provider configuration
// Tip: you can also supply these via environment variables or terraform.tfvars.
provider "qdrant-cloud" {
  api_key    = "" // API Key generated in Qdrant Cloud (required)
  account_id = "" // Default account ID (can be overridden per resource)
}

// Create a Hybrid Cloud Environment
resource "qdrant-cloud_accounts_hybrid_cloud_environment" "example" {
  name = "example-hc-env"

  configuration {
    // Namespace for Qdrant components in your Kubernetes cluster
    namespace = "qdrant-hc"
  }
}

locals {
  bootstrap_lines = qdrant-cloud_accounts_hybrid_cloud_environment.example.bootstrap_commands
  bootstrap_script = length(local.bootstrap_lines) == 0 ? "" : join("\n", concat(
    ["#!/usr/bin/env bash", "set -euo pipefail", ""],
    local.bootstrap_lines,
    [""],
  ))
}

resource "local_sensitive_file" "bootstrap" {
  # no conditional count/for_each — always 1
  content         = local.bootstrap_script
  filename        = "${path.module}/bootstrap-${qdrant-cloud_accounts_hybrid_cloud_environment.example.id}.sh"
  file_permission = "0700"

  # fail if there are no commands instead of writing an empty file
  lifecycle {
    precondition {
      condition     = length(local.bootstrap_lines) > 0
      error_message = "bootstrap_commands are empty; nothing to write."
    }
  }
}

// Outputs
output "bootstrap_script_path" {
  value = nonsensitive(local_sensitive_file.bootstrap.filename)
}

output "hc_environment_id" {
  value = qdrant-cloud_accounts_hybrid_cloud_environment.example.id
}

output "hc_environment_name" {
  value = qdrant-cloud_accounts_hybrid_cloud_environment.example.name
}

output "hc_environment_namespace" {
  value = qdrant-cloud_accounts_hybrid_cloud_environment.example.configuration[0].namespace
}

output "hc_environment_created_at" {
  value = qdrant-cloud_accounts_hybrid_cloud_environment.example.created_at
}

output "hc_environment_last_modified_at" {
  value = qdrant-cloud_accounts_hybrid_cloud_environment.example.last_modified_at
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `configuration` (Block List, Min: 1, Max: 1) Hybrid cloud environment Schema Configuration field (see [below for nested schema](#nestedblock--configuration))
- `name` (String) Hybrid cloud environment Schema Name field

### Optional

- `account_id` (String) Hybrid cloud environment Schema Account ID field
- `bootstrap_commands_version` (Number) Version knob to (re)generate bootstrap commands. -1 = never generate, 0 = idle/do not (re)generate, >0 = generate/rotate.

### Read-Only

- `bootstrap_commands` (List of String, Sensitive) Hybrid cloud environment Schema Commands to bootstrap a Kubernetes cluster into this environment field
- `created_at` (String) Hybrid cloud environment Schema Creation timestamp field
- `id` (String) Hybrid cloud environment Schema ID field
- `last_modified_at` (String) Hybrid cloud environment Schema Last modification timestamp field
- `status` (List of Object) Current status of the hybrid cloud environment (read-only). (see [below for nested schema](#nestedatt--status))

<a id="nestedblock--configuration"></a>
### Nested Schema for `configuration`

Required:

- `namespace` (String) The Kubernetes namespace where the Qdrant hybrid cloud components will be deployed.

Optional:

- `ca_certificates` (String) CA certificates for custom certificate authorities.
- `chart_repository_url` (String) Chart registry URL.
- `container_registry_url` (String) Container registry URL.
- `database_storage_class` (String) Default database storage class.
- `http_proxy_url` (String) Optional HTTP proxy URL.
- `https_proxy_url` (String) Optional HTTPS proxy URL.
- `log_level` (String) Log level for deployed components.
- `no_proxy_configs` (List of String) List of hosts that should not be proxied.
- `registry_secret_name` (String) Kubernetes secret name containing registry credentials.
- `snapshot_storage_class` (String) Default snapshot storage class.
- `volume_snapshot_storage_class` (String) Default volume snapshot storage class.

Read-Only:

- `last_modified_at` (String) Last modification timestamp of the configuration.


<a id="nestedatt--status"></a>
### Nested Schema for `status`

Read-Only:

- `capabilities` (List of Object) (see [below for nested schema](#nestedobjatt--status--capabilities))
- `cluster_creation_readiness` (String)
- `component_statuses` (List of Object) (see [below for nested schema](#nestedobjatt--status--component_statuses))
- `kubernetes_distribution` (String)
- `kubernetes_version` (String)
- `last_modified_at` (String)
- `message` (String)
- `number_of_nodes` (Number)
- `phase` (String)
- `storage_classes` (List of Object) (see [below for nested schema](#nestedobjatt--status--storage_classes))
- `volume_snapshot_classes` (List of Object) (see [below for nested schema](#nestedobjatt--status--volume_snapshot_classes))

<a id="nestedobjatt--status--capabilities"></a>
### Nested Schema for `status.capabilities`

Read-Only:

- `volume_expansion` (Boolean)
- `volume_snapshot` (Boolean)


<a id="nestedobjatt--status--component_statuses"></a>
### Nested Schema for `status.component_statuses`

Read-Only:

- `message` (String)
- `name` (String)
- `namespace` (String)
- `phase` (String)
- `version` (String)


<a id="nestedobjatt--status--storage_classes"></a>
### Nested Schema for `status.storage_classes`

Read-Only:

- `allow_volume_expansion` (Boolean)
- `default` (Boolean)
- `name` (String)
- `parameters` (Map of String)
- `provisioner` (String)
- `reclaim_policy` (String)


<a id="nestedobjatt--status--volume_snapshot_classes"></a>
### Nested Schema for `status.volume_snapshot_classes`

Read-Only:

- `driver` (String)
- `name` (String)





## Import

`qdrant-cloud_accounts_hybrid_cloud_environment` can be imported using the environment ID:

```
$ terraform import qdrant-cloud_accounts_hybrid_cloud_environment.example 00000000-0000-0000-0000-000000000000
```

## Next steps (bootstrap)

This resource exposes two related attributes:

- **`bootstrap_commands`** *(Sensitive, Computed list of strings)* — the exact shell commands you must run on your Kubernetes cluster to register/install the Qdrant hybrid-cloud agent for this environment.
- **`bootstrap_commands_version`** *(Optional int)* — the **rotation knob** that controls generation of the commands:
  - **`-1`** → never generate (opt-out).
  - **`0`** → idle (default on import/refresh; no generation).
  - **`> 0`** → generate on create, and **re-generate** whenever this value changes.

### Provider behavior

- **Create**: if the knob is `0` or unset → it’s bumped to `1` and commands are generated. If `-1` → no generation.  
- **Update**: changing the knob **re-generates** when `>0`; clears commands when `0` or `-1`.  
- **Read/Import**: never generates; seeds `bootstrap_commands_version = 0` and an empty `bootstrap_commands` list.  
- **Plan**: diffs on `bootstrap_commands` are suppressed unless the knob changes.

**Recommended:** write bootstrap commands to a file with the `local` provider, then run it:

```terraform
# Turn the list into a runnable script
locals {
  bootstrap_lines   = try(qdrant-cloud_accounts_hybrid_cloud_environment.example.bootstrap_commands, [])
  bootstrap_version = try(qdrant-cloud_accounts_hybrid_cloud_environment.example.bootstrap_commands_version, 0)

  bootstrap_script = length(local.bootstrap_lines) == 0 ? "" : join("\n", concat(
    ["#!/usr/bin/env bash", "set -euo pipefail", ""],
    local.bootstrap_lines,
    [""],
  ))
}

resource "local_sensitive_file" "bootstrap" {
  count           = local.bootstrap_version > 0 && length(local.bootstrap_lines) > 0 ? 1 : 0
  content         = local.bootstrap_script
  filename        = "${path.module}/bootstrap-${qdrant-cloud_accounts_hybrid_cloud_environment.example.id}.sh"
  file_permission = "0700"
}

# Optional: print the path without exposing sensitive contents
output "bootstrap_script_path" {
  value = length(local_sensitive_file.bootstrap) > 0 ? nonsensitive(local_sensitive_file.bootstrap[0].filename) : null
}
```

Then run against the kubernetes cluster you want your hybrid cloud to be in:

```
$ bash "$(terraform output -raw bootstrap_script_path)"
```
