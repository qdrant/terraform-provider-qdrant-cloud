---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "qdrant-cloud_accounts_database_api_key_v2 Resource - terraform-provider-qdrant-cloud"
subcategory: ""
description: |-
  Account Database API Key Resource (v2)
---

# qdrant-cloud_accounts_database_api_key_v2 (Resource)

Account Database API Key Resource (v2)

## Example Usage

```terraform
// Setup Terraform, including the qdrant-cloud providers
terraform {
  required_version = ">= 1.7.0"
  required_providers {
    qdrant-cloud = {
      source  = "qdrant/qdrant-cloud"
      version = ">=1.1.0"
    }
  }
}

// Add the provider to specify some provider wide settings
provider "qdrant-cloud" {
  api_key    = "" // API Key generated in Qdrant Cloud (required)
  account_id = "" // The default account ID you want to use in Qdrant Cloud (can be overriden on resource level)
}

// Get the cluster package
data "qdrant-cloud_booking_packages" "all_packages" {
  cloud_provider = "aws"       // Required. Please refer to the documentation (https://registry.terraform.io/providers/qdrant/qdrant-cloud/latest/docs/guides/getting-started) for the available options.
  cloud_region   = "us-west-2" // Required. Please refer to the documentation (https://registry.terraform.io/providers/qdrant/qdrant-cloud/latest/docs/guides/getting-started) for the available options.
}
locals {
  desired_package = [
    for pkg in data.qdrant-cloud_booking_packages.all_packages.packages : pkg
    if pkg.resource_configuration[0].cpu == "16000m" && pkg.resource_configuration[0].ram == "64Gi"
  ]
}

// Create a cluster (for the sake of having an ID, see below)
resource "qdrant-cloud_accounts_cluster" "example" {
  name           = "example-cluster"
  cloud_provider = data.qdrant-cloud_booking_packages.all_packages.cloud_provider
  cloud_region   = data.qdrant-cloud_booking_packages.all_packages.cloud_region
  configuration {
    number_of_nodes = 1
    database_configuration {
      service {
        jwt_rbac = true
      }
    }
    node_configuration {
      package_id = local.desired_package[0].id
    }
  }
}

// Create an V2 Auth Key, which refers to the cluster provided above
resource "qdrant-cloud_accounts_database_api_key_v2" "example-key" {
  cluster_id = qdrant-cloud_accounts_cluster.example.id
  name       = "example-key"
}

// Output the token (which can be used to access the database cluster)
output "token" {
  value = qdrant-cloud_accounts_database_api_key_v2.example-key.key
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `cluster_id` (String) Database API Keys V2 Schema Cluster Identifier for which this Auth Key is attached field
- `name` (String) Database API Keys V2 Schema Auth Key Name field

### Optional

- `account_id` (String) Database API Keys V2 Schema Account Identifier field
- `collection_access_rules` (Block List, Max: 20) A list of rules granting access to specific collections. Cannot be used with `global_access_rule`. (see [below for nested schema](#nestedblock--collection_access_rules))
- `expires_at` (String) Database API Keys V2 Schema Timestamp when the Auth Key expires field
- `global_access_rule` (Block List, Max: 1) A rule granting global access to the entire database. Cannot be used with `collection_access_rules`. (see [below for nested schema](#nestedblock--global_access_rule))

### Read-Only

- `created_at` (String) Database API Keys V2 Schema Timestamp when the Auth Key is created field
- `created_by_email` (String) Database API Keys V2 Schema Email of the user who created the key field
- `id` (String) Database API Keys V2 Schema Auth Key Identifier field
- `key` (String) Database API Keys V2 Schema Secret key for this Auth Key field
- `postfix` (String) Database API Keys V2 Schema Postfix of the Auth Key field

<a id="nestedblock--collection_access_rules"></a>
### Nested Schema for `collection_access_rules`

Required:

- `access_type` (String) Access type for the collection. Can be `COLLECTION_ACCESS_RULE_ACCESS_TYPE_READ_ONLY` or `COLLECTION_ACCESS_RULE_ACCESS_TYPE_READ_WRITE`.
- `collection_name` (String) Name of the collection.


<a id="nestedblock--global_access_rule"></a>
### Nested Schema for `global_access_rule`

Required:

- `access_type` (String) Access type for global access. Can be `GLOBAL_ACCESS_RULE_ACCESS_TYPE_READ_ONLY` or `GLOBAL_ACCESS_RULE_ACCESS_TYPE_MANAGE`.
